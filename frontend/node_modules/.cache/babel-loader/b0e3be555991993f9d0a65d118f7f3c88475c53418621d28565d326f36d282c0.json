{"ast":null,"code":"var _jsxFileName = \"/Volumes/DATOS/verificador/verificadortrx/frontend/src/components/UserP2POffers.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { motion } from 'framer-motion';\nimport Button from './Button';\nimport p2pService from '../services/p2pService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OffersContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\n_c = OffersContainer;\nconst OfferCard = styled(motion.div)`\n  background: rgba(30, 40, 60, 0.6);\n  border-radius: var(--border-radius);\n  padding: 1.5rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    border-color: var(--color-primary);\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n    transform: translateY(-2px);\n  }\n  \n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 4px;\n    height: 100%;\n    background: ${props => props.type === 'compra' ? 'var(--color-success)' : 'var(--color-danger)'};\n  }\n`;\n_c2 = OfferCard;\nconst OfferHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n_c3 = OfferHeader;\nconst OfferType = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  background: ${props => props.type === 'compra' ? 'rgba(0, 200, 83, 0.2)' : 'rgba(255, 61, 0, 0.2)'};\n  color: ${props => props.type === 'compra' ? 'var(--color-success)' : 'var(--color-danger)'};\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  \n  &:before {\n    content: ${props => props.type === 'compra' ? '\"⬇️\"' : '\"⬆️\"'};\n    font-size: 0.875rem;\n  }\n`;\n_c4 = OfferType;\nconst OfferStatus = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  background: ${props => {\n  switch (props.status) {\n    case 'activa':\n      return 'rgba(0, 200, 83, 0.2)';\n    case 'pausada':\n      return 'rgba(255, 214, 0, 0.2)';\n    case 'completada':\n      return 'rgba(0, 120, 255, 0.2)';\n    case 'cancelada':\n      return 'rgba(255, 61, 0, 0.2)';\n    default:\n      return 'rgba(255, 255, 255, 0.1)';\n  }\n}};\n  color: ${props => {\n  switch (props.status) {\n    case 'activa':\n      return 'var(--color-success)';\n    case 'pausada':\n      return 'var(--color-warning)';\n    case 'completada':\n      return 'var(--color-primary)';\n    case 'cancelada':\n      return 'var(--color-danger)';\n    default:\n      return 'var(--color-text-secondary)';\n  }\n}};\n`;\n_c5 = OfferStatus;\nconst OfferPrice = styled.div`\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-primary);\n`;\n_c6 = OfferPrice;\nconst OfferDetails = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1rem;\n`;\n_c7 = OfferDetails;\nconst OfferDetail = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n`;\n_c8 = OfferDetail;\nconst DetailLabel = styled.span`\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  text-transform: uppercase;\n  font-weight: 500;\n`;\n_c9 = DetailLabel;\nconst DetailValue = styled.span`\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 500;\n`;\n_c0 = DetailValue;\nconst OfferActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  gap: 0.5rem;\n`;\n_c1 = OfferActions;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem;\n  color: var(--color-text-secondary);\n  background: rgba(30, 40, 60, 0.4);\n  border-radius: var(--border-radius);\n  border: 1px dashed rgba(255, 255, 255, 0.2);\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1.25rem;\n    margin-bottom: 0.5rem;\n    color: var(--color-text);\n  }\n  \n  p {\n    margin-bottom: 1.5rem;\n  }\n`;\n_c10 = EmptyState;\nconst LoadingState = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  \n  &:before {\n    content: '';\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 3px solid rgba(255, 255, 255, 0.1);\n    border-top-color: var(--color-primary);\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\n_c11 = LoadingState;\nconst CreateOfferButton = styled(Button)`\n  background: var(--color-success);\n  color: white;\n  font-weight: 600;\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 200, 83, 0.3);\n  }\n`;\n_c12 = CreateOfferButton;\nconst paymentMethods = {\n  transferencia_bancaria: 'Transferencia Bancaria',\n  billetera_digital: 'Billetera Digital',\n  efectivo: 'Efectivo',\n  tarjeta_credito: 'Tarjeta de Crédito',\n  tarjeta_debito: 'Tarjeta de Débito'\n};\nconst UserP2POffers = ({\n  wallet,\n  onCreateOffer\n}) => {\n  _s();\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (wallet) {\n      loadUserOffers();\n    }\n  }, [wallet]);\n  const loadUserOffers = async () => {\n    try {\n      setLoading(true);\n      const response = await p2pService.getUserP2POffers(wallet);\n      setOffers(response.data.data || []);\n    } catch (error) {\n      console.error('Error loading user offers:', error);\n      setOffers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleToggleStatus = async offer => {\n    try {\n      const newStatus = offer.status === 'activa' ? 'pausada' : 'activa';\n      const response = await p2pService.updateOfferStatus(offer.id, wallet, newStatus);\n\n      // Actualizar la oferta localmente\n      setOffers(prevOffers => prevOffers.map(o => o.id === offer.id ? {\n        ...o,\n        status: newStatus\n      } : o));\n\n      // Si estamos en modo offline, mostrar mensaje\n      if (response && response._offline) {\n        alert('Cambio guardado en modo offline. Se sincronizará cuando el servidor esté disponible.');\n      }\n    } catch (error) {\n      console.error('Error updating offer status:', error);\n      if (error.message === 'Network Error' || error.code === 'ERR_NETWORK') {\n        alert('Error de conexión al servidor. El cambio se guardará localmente y se sincronizará cuando el servidor esté disponible.');\n\n        // Actualizar la oferta localmente de todos modos\n        const newStatus = offer.status === 'activa' ? 'pausada' : 'activa';\n        setOffers(prevOffers => prevOffers.map(o => o.id === offer.id ? {\n          ...o,\n          status: newStatus,\n          _offline: true\n        } : o));\n      } else {\n        var _error$response, _error$response$data;\n        alert('Error al actualizar el estado de la oferta: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n      }\n    }\n  };\n  const handleDeleteOffer = async offer => {\n    // Usar window.confirm para evitar problemas con ESLint\n    if (!window.confirm('¿Estás seguro de que deseas eliminar esta oferta?')) {\n      return;\n    }\n    try {\n      const response = await p2pService.updateOfferStatus(offer.id, wallet, 'cancelada');\n\n      // Eliminar la oferta de la lista\n      setOffers(prevOffers => prevOffers.filter(o => o.id !== offer.id));\n\n      // Si estamos en modo offline, mostrar mensaje\n      if (response && response._offline) {\n        alert('Oferta eliminada en modo offline. Se sincronizará cuando el servidor esté disponible.');\n      }\n    } catch (error) {\n      console.error('Error deleting offer:', error);\n      if (error.message === 'Network Error' || error.code === 'ERR_NETWORK') {\n        alert('Error de conexión al servidor. La oferta se eliminará localmente y se sincronizará cuando el servidor esté disponible.');\n\n        // Eliminar la oferta de la lista de todos modos\n        setOffers(prevOffers => prevOffers.filter(o => o.id !== offer.id));\n      } else {\n        var _error$response2, _error$response2$data;\n        alert('Error al eliminar la oferta: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message));\n      }\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingState, {\n      children: \"Cargando tus ofertas...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 12\n    }, this);\n  }\n  if (offers.length === 0) {\n    return /*#__PURE__*/_jsxDEV(EmptyState, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No tienes ofertas creadas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Crea tu primera oferta para empezar a tradear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CreateOfferButton, {\n        onClick: onCreateOffer,\n        children: \"+ Crear Nueva Oferta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(OffersContainer, {\n    children: [offers.map(offer => /*#__PURE__*/_jsxDEV(OfferCard, {\n      type: offer.tipo,\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      transition: {\n        duration: 0.3\n      },\n      children: [/*#__PURE__*/_jsxDEV(OfferHeader, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(OfferType, {\n            type: offer.tipo,\n            children: [offer.tipo === 'compra' ? 'Compra' : 'Venta', \" USDT\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(OfferStatus, {\n            status: offer.status,\n            children: offer.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), offer._offline && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '0.75rem',\n              color: 'var(--color-warning)',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u26A0\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 19\n            }, this), \" Pendiente de sincronizar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OfferPrice, {\n          children: [offer.precio_usdt, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '0.875rem',\n              fontWeight: 'normal'\n            },\n            children: offer.moneda_local\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(OfferDetails, {\n        children: [/*#__PURE__*/_jsxDEV(OfferDetail, {\n          children: [/*#__PURE__*/_jsxDEV(DetailLabel, {\n            children: \"L\\xEDmites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DetailValue, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'var(--color-primary)'\n              },\n              children: [offer.cantidad_min, \" - \", offer.cantidad_max]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this), \" USDT\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OfferDetail, {\n          children: [/*#__PURE__*/_jsxDEV(DetailLabel, {\n            children: \"M\\xE9todo de Pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DetailValue, {\n            children: [offer.metodo_pago === 'transferencia_bancaria' && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83C\\uDFE6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 68\n            }, this), offer.metodo_pago === 'billetera_digital' && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCF1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 63\n            }, this), offer.metodo_pago === 'efectivo' && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCB5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 54\n            }, this), offer.metodo_pago === 'tarjeta_credito' && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCB3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 61\n            }, this), offer.metodo_pago === 'tarjeta_debito' && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCB3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 60\n            }, this), ' ', paymentMethods[offer.metodo_pago] || offer.metodo_pago]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OfferDetail, {\n          children: [/*#__PURE__*/_jsxDEV(DetailLabel, {\n            children: \"Pa\\xEDs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DetailValue, {\n            children: [offer.pais_codigo === 'CO' && '🇨🇴', offer.pais_codigo === 'MX' && '🇲🇽', offer.pais_codigo === 'AR' && '🇦🇷', offer.pais_codigo === 'VE' && '🇻🇪', offer.pais_codigo === 'PE' && '🇵🇪', offer.pais_codigo === 'CL' && '🇨🇱', offer.pais_codigo === 'BR' && '🇧🇷', offer.pais_codigo === 'ES' && '🇪🇸', offer.pais_codigo === 'US' && '🇺🇸', ' ', offer.pais_codigo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OfferDetail, {\n          children: [/*#__PURE__*/_jsxDEV(DetailLabel, {\n            children: \"Tiempo L\\xEDmite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DetailValue, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'var(--color-warning)'\n              },\n              children: [\"\\u23F1\\uFE0F \", offer.tiempo_limite]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), \" min\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(OfferActions, {\n        children: offer.status !== 'cancelada' && offer.status !== 'completada' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            variant: offer.status === 'activa' ? 'warning' : 'success',\n            onClick: () => handleToggleStatus(offer),\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              borderRadius: '6px',\n              fontWeight: '600'\n            },\n            children: offer.status === 'activa' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u23F8\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 23\n              }, this), \" Pausar\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u25B6\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 23\n              }, this), \" Activar\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            variant: \"danger\",\n            onClick: () => handleDeleteOffer(offer),\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              borderRadius: '6px',\n              fontWeight: '600'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 19\n            }, this), \" Eliminar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this)]\n    }, offer.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(CreateOfferButton, {\n        onClick: onCreateOffer,\n        children: \"+ Crear Nueva Oferta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n};\n_s(UserP2POffers, \"xa2mBrA+YB7lrejDtYohDdYDQU4=\");\n_c13 = UserP2POffers;\nexport default UserP2POffers;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"OffersContainer\");\n$RefreshReg$(_c2, \"OfferCard\");\n$RefreshReg$(_c3, \"OfferHeader\");\n$RefreshReg$(_c4, \"OfferType\");\n$RefreshReg$(_c5, \"OfferStatus\");\n$RefreshReg$(_c6, \"OfferPrice\");\n$RefreshReg$(_c7, \"OfferDetails\");\n$RefreshReg$(_c8, \"OfferDetail\");\n$RefreshReg$(_c9, \"DetailLabel\");\n$RefreshReg$(_c0, \"DetailValue\");\n$RefreshReg$(_c1, \"OfferActions\");\n$RefreshReg$(_c10, \"EmptyState\");\n$RefreshReg$(_c11, \"LoadingState\");\n$RefreshReg$(_c12, \"CreateOfferButton\");\n$RefreshReg$(_c13, \"UserP2POffers\");","map":{"version":3,"names":["React","useState","useEffect","styled","motion","Button","p2pService","jsxDEV","_jsxDEV","Fragment","_Fragment","OffersContainer","div","_c","OfferCard","props","type","_c2","OfferHeader","_c3","OfferType","span","_c4","OfferStatus","status","_c5","OfferPrice","_c6","OfferDetails","_c7","OfferDetail","_c8","DetailLabel","_c9","DetailValue","_c0","OfferActions","_c1","EmptyState","_c10","LoadingState","_c11","CreateOfferButton","_c12","paymentMethods","transferencia_bancaria","billetera_digital","efectivo","tarjeta_credito","tarjeta_debito","UserP2POffers","wallet","onCreateOffer","_s","offers","setOffers","loading","setLoading","loadUserOffers","response","getUserP2POffers","data","error","console","handleToggleStatus","offer","newStatus","updateOfferStatus","id","prevOffers","map","o","_offline","alert","message","code","_error$response","_error$response$data","handleDeleteOffer","window","confirm","filter","_error$response2","_error$response2$data","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","tipo","initial","opacity","y","animate","transition","duration","style","display","gap","alignItems","fontSize","color","precio_usdt","fontWeight","moneda_local","cantidad_min","cantidad_max","metodo_pago","pais_codigo","tiempo_limite","size","variant","borderRadius","justifyContent","marginTop","_c13","$RefreshReg$"],"sources":["/Volumes/DATOS/verificador/verificadortrx/frontend/src/components/UserP2POffers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { motion } from 'framer-motion';\nimport Button from './Button';\nimport p2pService from '../services/p2pService';\n\nconst OffersContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\n\nconst OfferCard = styled(motion.div)`\n  background: rgba(30, 40, 60, 0.6);\n  border-radius: var(--border-radius);\n  padding: 1.5rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    border-color: var(--color-primary);\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n    transform: translateY(-2px);\n  }\n  \n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 4px;\n    height: 100%;\n    background: ${props => props.type === 'compra' ? 'var(--color-success)' : 'var(--color-danger)'};\n  }\n`;\n\nconst OfferHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n\nconst OfferType = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  background: ${props => props.type === 'compra' ? 'rgba(0, 200, 83, 0.2)' : 'rgba(255, 61, 0, 0.2)'};\n  color: ${props => props.type === 'compra' ? 'var(--color-success)' : 'var(--color-danger)'};\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  \n  &:before {\n    content: ${props => props.type === 'compra' ? '\"⬇️\"' : '\"⬆️\"'};\n    font-size: 0.875rem;\n  }\n`;\n\nconst OfferStatus = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  background: ${props => {\n    switch(props.status) {\n      case 'activa': return 'rgba(0, 200, 83, 0.2)';\n      case 'pausada': return 'rgba(255, 214, 0, 0.2)';\n      case 'completada': return 'rgba(0, 120, 255, 0.2)';\n      case 'cancelada': return 'rgba(255, 61, 0, 0.2)';\n      default: return 'rgba(255, 255, 255, 0.1)';\n    }\n  }};\n  color: ${props => {\n    switch(props.status) {\n      case 'activa': return 'var(--color-success)';\n      case 'pausada': return 'var(--color-warning)';\n      case 'completada': return 'var(--color-primary)';\n      case 'cancelada': return 'var(--color-danger)';\n      default: return 'var(--color-text-secondary)';\n    }\n  }};\n`;\n\nconst OfferPrice = styled.div`\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-primary);\n`;\n\nconst OfferDetails = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1rem;\n`;\n\nconst OfferDetail = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n`;\n\nconst DetailLabel = styled.span`\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  text-transform: uppercase;\n  font-weight: 500;\n`;\n\nconst DetailValue = styled.span`\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 500;\n`;\n\nconst OfferActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  gap: 0.5rem;\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem;\n  color: var(--color-text-secondary);\n  background: rgba(30, 40, 60, 0.4);\n  border-radius: var(--border-radius);\n  border: 1px dashed rgba(255, 255, 255, 0.2);\n  margin: 1rem 0;\n  \n  h3 {\n    font-size: 1.25rem;\n    margin-bottom: 0.5rem;\n    color: var(--color-text);\n  }\n  \n  p {\n    margin-bottom: 1.5rem;\n  }\n`;\n\nconst LoadingState = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  \n  &:before {\n    content: '';\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 3px solid rgba(255, 255, 255, 0.1);\n    border-top-color: var(--color-primary);\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\n\nconst CreateOfferButton = styled(Button)`\n  background: var(--color-success);\n  color: white;\n  font-weight: 600;\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 200, 83, 0.3);\n  }\n`;\n\nconst paymentMethods = {\n  transferencia_bancaria: 'Transferencia Bancaria',\n  billetera_digital: 'Billetera Digital',\n  efectivo: 'Efectivo',\n  tarjeta_credito: 'Tarjeta de Crédito',\n  tarjeta_debito: 'Tarjeta de Débito'\n};\n\nconst UserP2POffers = ({ wallet, onCreateOffer }) => {\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (wallet) {\n      loadUserOffers();\n    }\n  }, [wallet]);\n\n  const loadUserOffers = async () => {\n    try {\n      setLoading(true);\n      const response = await p2pService.getUserP2POffers(wallet);\n      setOffers(response.data.data || []);\n    } catch (error) {\n      console.error('Error loading user offers:', error);\n      setOffers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleToggleStatus = async (offer) => {\n    try {\n      const newStatus = offer.status === 'activa' ? 'pausada' : 'activa';\n      const response = await p2pService.updateOfferStatus(offer.id, wallet, newStatus);\n      \n      // Actualizar la oferta localmente\n      setOffers(prevOffers => \n        prevOffers.map(o => \n          o.id === offer.id ? { ...o, status: newStatus } : o\n        )\n      );\n      \n      // Si estamos en modo offline, mostrar mensaje\n      if (response && response._offline) {\n        alert('Cambio guardado en modo offline. Se sincronizará cuando el servidor esté disponible.');\n      }\n    } catch (error) {\n      console.error('Error updating offer status:', error);\n      \n      if (error.message === 'Network Error' || error.code === 'ERR_NETWORK') {\n        alert('Error de conexión al servidor. El cambio se guardará localmente y se sincronizará cuando el servidor esté disponible.');\n        \n        // Actualizar la oferta localmente de todos modos\n        const newStatus = offer.status === 'activa' ? 'pausada' : 'activa';\n        setOffers(prevOffers => \n          prevOffers.map(o => \n            o.id === offer.id ? { ...o, status: newStatus, _offline: true } : o\n          )\n        );\n      } else {\n        alert('Error al actualizar el estado de la oferta: ' + (error.response?.data?.error || error.message));\n      }\n    }\n  };\n\n  const handleDeleteOffer = async (offer) => {\n    // Usar window.confirm para evitar problemas con ESLint\n    if (!window.confirm('¿Estás seguro de que deseas eliminar esta oferta?')) {\n      return;\n    }\n\n    try {\n      const response = await p2pService.updateOfferStatus(offer.id, wallet, 'cancelada');\n      \n      // Eliminar la oferta de la lista\n      setOffers(prevOffers => prevOffers.filter(o => o.id !== offer.id));\n      \n      // Si estamos en modo offline, mostrar mensaje\n      if (response && response._offline) {\n        alert('Oferta eliminada en modo offline. Se sincronizará cuando el servidor esté disponible.');\n      }\n    } catch (error) {\n      console.error('Error deleting offer:', error);\n      \n      if (error.message === 'Network Error' || error.code === 'ERR_NETWORK') {\n        alert('Error de conexión al servidor. La oferta se eliminará localmente y se sincronizará cuando el servidor esté disponible.');\n        \n        // Eliminar la oferta de la lista de todos modos\n        setOffers(prevOffers => prevOffers.filter(o => o.id !== offer.id));\n      } else {\n        alert('Error al eliminar la oferta: ' + (error.response?.data?.error || error.message));\n      }\n    }\n  };\n\n  if (loading) {\n    return <LoadingState>Cargando tus ofertas...</LoadingState>;\n  }\n\n  if (offers.length === 0) {\n    return (\n      <EmptyState>\n        <h3>No tienes ofertas creadas</h3>\n        <p>Crea tu primera oferta para empezar a tradear</p>\n        <CreateOfferButton onClick={onCreateOffer}>\n          + Crear Nueva Oferta\n        </CreateOfferButton>\n      </EmptyState>\n    );\n  }\n\n  return (\n    <OffersContainer>\n      {offers.map(offer => (\n        <OfferCard\n          key={offer.id}\n          type={offer.tipo}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n        >\n          <OfferHeader>\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              <OfferType type={offer.tipo}>\n                {offer.tipo === 'compra' ? 'Compra' : 'Venta'} USDT\n              </OfferType>\n              <OfferStatus status={offer.status}>\n                {offer.status}\n              </OfferStatus>\n              {offer._offline && (\n                <span style={{ \n                  fontSize: '0.75rem', \n                  color: 'var(--color-warning)',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.25rem'\n                }}>\n                  <span>⚠️</span> Pendiente de sincronizar\n                </span>\n              )}\n            </div>\n            <OfferPrice>\n              {offer.precio_usdt} <span style={{ fontSize: '0.875rem', fontWeight: 'normal' }}>{offer.moneda_local}</span>\n            </OfferPrice>\n          </OfferHeader>\n\n          <OfferDetails>\n            <OfferDetail>\n              <DetailLabel>Límites</DetailLabel>\n              <DetailValue>\n                <span style={{ color: 'var(--color-primary)' }}>{offer.cantidad_min} - {offer.cantidad_max}</span> USDT\n              </DetailValue>\n            </OfferDetail>\n            <OfferDetail>\n              <DetailLabel>Método de Pago</DetailLabel>\n              <DetailValue>\n                {offer.metodo_pago === 'transferencia_bancaria' && <span>🏦</span>}\n                {offer.metodo_pago === 'billetera_digital' && <span>📱</span>}\n                {offer.metodo_pago === 'efectivo' && <span>💵</span>}\n                {offer.metodo_pago === 'tarjeta_credito' && <span>💳</span>}\n                {offer.metodo_pago === 'tarjeta_debito' && <span>💳</span>}\n                {' '}{paymentMethods[offer.metodo_pago] || offer.metodo_pago}\n              </DetailValue>\n            </OfferDetail>\n            <OfferDetail>\n              <DetailLabel>País</DetailLabel>\n              <DetailValue>\n                {offer.pais_codigo === 'CO' && '🇨🇴'}\n                {offer.pais_codigo === 'MX' && '🇲🇽'}\n                {offer.pais_codigo === 'AR' && '🇦🇷'}\n                {offer.pais_codigo === 'VE' && '🇻🇪'}\n                {offer.pais_codigo === 'PE' && '🇵🇪'}\n                {offer.pais_codigo === 'CL' && '🇨🇱'}\n                {offer.pais_codigo === 'BR' && '🇧🇷'}\n                {offer.pais_codigo === 'ES' && '🇪🇸'}\n                {offer.pais_codigo === 'US' && '🇺🇸'}\n                {' '}{offer.pais_codigo}\n              </DetailValue>\n            </OfferDetail>\n            <OfferDetail>\n              <DetailLabel>Tiempo Límite</DetailLabel>\n              <DetailValue>\n                <span style={{ color: 'var(--color-warning)' }}>⏱️ {offer.tiempo_limite}</span> min\n              </DetailValue>\n            </OfferDetail>\n          </OfferDetails>\n\n          <OfferActions>\n            {offer.status !== 'cancelada' && offer.status !== 'completada' && (\n              <>\n                <Button \n                  size=\"small\" \n                  variant={offer.status === 'activa' ? 'warning' : 'success'}\n                  onClick={() => handleToggleStatus(offer)}\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.25rem',\n                    borderRadius: '6px',\n                    fontWeight: '600'\n                  }}\n                >\n                  {offer.status === 'activa' ? (\n                    <>\n                      <span>⏸️</span> Pausar\n                    </>\n                  ) : (\n                    <>\n                      <span>▶️</span> Activar\n                    </>\n                  )}\n                </Button>\n                <Button \n                  size=\"small\" \n                  variant=\"danger\"\n                  onClick={() => handleDeleteOffer(offer)}\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.25rem',\n                    borderRadius: '6px',\n                    fontWeight: '600'\n                  }}\n                >\n                  <span>🗑️</span> Eliminar\n                </Button>\n              </>\n            )}\n          </OfferActions>\n        </OfferCard>\n      ))}\n      \n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        marginTop: '2rem' \n      }}>\n        <CreateOfferButton onClick={onCreateOffer}>\n          + Crear Nueva Oferta\n        </CreateOfferButton>\n      </div>\n    </OffersContainer>\n  );\n};\n\nexport default UserP2POffers;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,UAAU,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEhD,MAAMC,eAAe,GAAGR,MAAM,CAACS,GAAG;AAClC;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAJIF,eAAe;AAMrB,MAAMG,SAAS,GAAGX,MAAM,CAACC,MAAM,CAACQ,GAAG,CAAC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBG,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,QAAQ,GAAG,sBAAsB,GAAG,qBAAqB;AACnG;AACA,CAAC;AAACC,GAAA,GAxBIH,SAAS;AA0Bf,MAAMI,WAAW,GAAGf,MAAM,CAACS,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GALID,WAAW;AAOjB,MAAME,SAAS,GAAGjB,MAAM,CAACkB,IAAI;AAC7B;AACA;AACA;AACA;AACA;AACA,gBAAgBN,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,QAAQ,GAAG,uBAAuB,GAAG,uBAAuB;AACpG,WAAWD,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,QAAQ,GAAG,sBAAsB,GAAG,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA,eAAeD,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,QAAQ,GAAG,MAAM,GAAG,MAAM;AACjE;AACA;AACA,CAAC;AAACM,GAAA,GAhBIF,SAAS;AAkBf,MAAMG,WAAW,GAAGpB,MAAM,CAACkB,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA,gBAAgBN,KAAK,IAAI;EACrB,QAAOA,KAAK,CAACS,MAAM;IACjB,KAAK,QAAQ;MAAE,OAAO,uBAAuB;IAC7C,KAAK,SAAS;MAAE,OAAO,wBAAwB;IAC/C,KAAK,YAAY;MAAE,OAAO,wBAAwB;IAClD,KAAK,WAAW;MAAE,OAAO,uBAAuB;IAChD;MAAS,OAAO,0BAA0B;EAC5C;AACF,CAAC;AACH,WAAWT,KAAK,IAAI;EAChB,QAAOA,KAAK,CAACS,MAAM;IACjB,KAAK,QAAQ;MAAE,OAAO,sBAAsB;IAC5C,KAAK,SAAS;MAAE,OAAO,sBAAsB;IAC7C,KAAK,YAAY;MAAE,OAAO,sBAAsB;IAChD,KAAK,WAAW;MAAE,OAAO,qBAAqB;IAC9C;MAAS,OAAO,6BAA6B;EAC/C;AACF,CAAC;AACH,CAAC;AAACC,GAAA,GAxBIF,WAAW;AA0BjB,MAAMG,UAAU,GAAGvB,MAAM,CAACS,GAAG;AAC7B;AACA;AACA;AACA,CAAC;AAACe,GAAA,GAJID,UAAU;AAMhB,MAAME,YAAY,GAAGzB,MAAM,CAACS,GAAG;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACiB,GAAA,GALID,YAAY;AAOlB,MAAME,WAAW,GAAG3B,MAAM,CAACS,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAACmB,GAAA,GAJID,WAAW;AAMjB,MAAME,WAAW,GAAG7B,MAAM,CAACkB,IAAI;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACY,GAAA,GALID,WAAW;AAOjB,MAAME,WAAW,GAAG/B,MAAM,CAACkB,IAAI;AAC/B;AACA;AACA;AACA,CAAC;AAACc,GAAA,GAJID,WAAW;AAMjB,MAAME,YAAY,GAAGjC,MAAM,CAACS,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyB,GAAA,GARID,YAAY;AAUlB,MAAME,UAAU,GAAGnC,MAAM,CAACS,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2B,IAAA,GAlBID,UAAU;AAoBhB,MAAME,YAAY,GAAGrC,MAAM,CAACS,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6B,IAAA,GAtBID,YAAY;AAwBlB,MAAME,iBAAiB,GAAGvC,MAAM,CAACE,MAAM,CAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsC,IAAA,GAZID,iBAAiB;AAcvB,MAAME,cAAc,GAAG;EACrBC,sBAAsB,EAAE,wBAAwB;EAChDC,iBAAiB,EAAE,mBAAmB;EACtCC,QAAQ,EAAE,UAAU;EACpBC,eAAe,EAAE,oBAAoB;EACrCC,cAAc,EAAE;AAClB,CAAC;AAED,MAAMC,aAAa,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACnD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGtD,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACuD,OAAO,EAAEC,UAAU,CAAC,GAAGxD,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,IAAIiD,MAAM,EAAE;MACVO,cAAc,CAAC,CAAC;IAClB;EACF,CAAC,EAAE,CAACP,MAAM,CAAC,CAAC;EAEZ,MAAMO,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACFD,UAAU,CAAC,IAAI,CAAC;MAChB,MAAME,QAAQ,GAAG,MAAMrD,UAAU,CAACsD,gBAAgB,CAACT,MAAM,CAAC;MAC1DI,SAAS,CAACI,QAAQ,CAACE,IAAI,CAACA,IAAI,IAAI,EAAE,CAAC;IACrC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClDP,SAAS,CAAC,EAAE,CAAC;IACf,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMO,kBAAkB,GAAG,MAAOC,KAAK,IAAK;IAC1C,IAAI;MACF,MAAMC,SAAS,GAAGD,KAAK,CAACzC,MAAM,KAAK,QAAQ,GAAG,SAAS,GAAG,QAAQ;MAClE,MAAMmC,QAAQ,GAAG,MAAMrD,UAAU,CAAC6D,iBAAiB,CAACF,KAAK,CAACG,EAAE,EAAEjB,MAAM,EAAEe,SAAS,CAAC;;MAEhF;MACAX,SAAS,CAACc,UAAU,IAClBA,UAAU,CAACC,GAAG,CAACC,CAAC,IACdA,CAAC,CAACH,EAAE,KAAKH,KAAK,CAACG,EAAE,GAAG;QAAE,GAAGG,CAAC;QAAE/C,MAAM,EAAE0C;MAAU,CAAC,GAAGK,CACpD,CACF,CAAC;;MAED;MACA,IAAIZ,QAAQ,IAAIA,QAAQ,CAACa,QAAQ,EAAE;QACjCC,KAAK,CAAC,sFAAsF,CAAC;MAC/F;IACF,CAAC,CAAC,OAAOX,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MAEpD,IAAIA,KAAK,CAACY,OAAO,KAAK,eAAe,IAAIZ,KAAK,CAACa,IAAI,KAAK,aAAa,EAAE;QACrEF,KAAK,CAAC,uHAAuH,CAAC;;QAE9H;QACA,MAAMP,SAAS,GAAGD,KAAK,CAACzC,MAAM,KAAK,QAAQ,GAAG,SAAS,GAAG,QAAQ;QAClE+B,SAAS,CAACc,UAAU,IAClBA,UAAU,CAACC,GAAG,CAACC,CAAC,IACdA,CAAC,CAACH,EAAE,KAAKH,KAAK,CAACG,EAAE,GAAG;UAAE,GAAGG,CAAC;UAAE/C,MAAM,EAAE0C,SAAS;UAAEM,QAAQ,EAAE;QAAK,CAAC,GAAGD,CACpE,CACF,CAAC;MACH,CAAC,MAAM;QAAA,IAAAK,eAAA,EAAAC,oBAAA;QACLJ,KAAK,CAAC,8CAA8C,IAAI,EAAAG,eAAA,GAAAd,KAAK,CAACH,QAAQ,cAAAiB,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBf,IAAI,cAAAgB,oBAAA,uBAApBA,oBAAA,CAAsBf,KAAK,KAAIA,KAAK,CAACY,OAAO,CAAC,CAAC;MACxG;IACF;EACF,CAAC;EAED,MAAMI,iBAAiB,GAAG,MAAOb,KAAK,IAAK;IACzC;IACA,IAAI,CAACc,MAAM,CAACC,OAAO,CAAC,mDAAmD,CAAC,EAAE;MACxE;IACF;IAEA,IAAI;MACF,MAAMrB,QAAQ,GAAG,MAAMrD,UAAU,CAAC6D,iBAAiB,CAACF,KAAK,CAACG,EAAE,EAAEjB,MAAM,EAAE,WAAW,CAAC;;MAElF;MACAI,SAAS,CAACc,UAAU,IAAIA,UAAU,CAACY,MAAM,CAACV,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKH,KAAK,CAACG,EAAE,CAAC,CAAC;;MAElE;MACA,IAAIT,QAAQ,IAAIA,QAAQ,CAACa,QAAQ,EAAE;QACjCC,KAAK,CAAC,uFAAuF,CAAC;MAChG;IACF,CAAC,CAAC,OAAOX,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAE7C,IAAIA,KAAK,CAACY,OAAO,KAAK,eAAe,IAAIZ,KAAK,CAACa,IAAI,KAAK,aAAa,EAAE;QACrEF,KAAK,CAAC,wHAAwH,CAAC;;QAE/H;QACAlB,SAAS,CAACc,UAAU,IAAIA,UAAU,CAACY,MAAM,CAACV,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKH,KAAK,CAACG,EAAE,CAAC,CAAC;MACpE,CAAC,MAAM;QAAA,IAAAc,gBAAA,EAAAC,qBAAA;QACLV,KAAK,CAAC,+BAA+B,IAAI,EAAAS,gBAAA,GAAApB,KAAK,CAACH,QAAQ,cAAAuB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBrB,IAAI,cAAAsB,qBAAA,uBAApBA,qBAAA,CAAsBrB,KAAK,KAAIA,KAAK,CAACY,OAAO,CAAC,CAAC;MACzF;IACF;EACF,CAAC;EAED,IAAIlB,OAAO,EAAE;IACX,oBAAOhD,OAAA,CAACgC,YAAY;MAAA4C,QAAA,EAAC;IAAuB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAc,CAAC;EAC7D;EAEA,IAAIlC,MAAM,CAACmC,MAAM,KAAK,CAAC,EAAE;IACvB,oBACEjF,OAAA,CAAC8B,UAAU;MAAA8C,QAAA,gBACT5E,OAAA;QAAA4E,QAAA,EAAI;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClChF,OAAA;QAAA4E,QAAA,EAAG;MAA6C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACpDhF,OAAA,CAACkC,iBAAiB;QAACgD,OAAO,EAAEtC,aAAc;QAAAgC,QAAA,EAAC;MAE3C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAEjB;EAEA,oBACEhF,OAAA,CAACG,eAAe;IAAAyE,QAAA,GACb9B,MAAM,CAACgB,GAAG,CAACL,KAAK,iBACfzD,OAAA,CAACM,SAAS;MAERE,IAAI,EAAEiD,KAAK,CAAC0B,IAAK;MACjBC,OAAO,EAAE;QAAEC,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAG,CAAE;MAC/BC,OAAO,EAAE;QAAEF,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAE;MAC9BE,UAAU,EAAE;QAAEC,QAAQ,EAAE;MAAI,CAAE;MAAAb,QAAA,gBAE9B5E,OAAA,CAACU,WAAW;QAAAkE,QAAA,gBACV5E,OAAA;UAAK0F,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,GAAG,EAAE,QAAQ;YAAEC,UAAU,EAAE;UAAS,CAAE;UAAAjB,QAAA,gBACnE5E,OAAA,CAACY,SAAS;YAACJ,IAAI,EAAEiD,KAAK,CAAC0B,IAAK;YAAAP,QAAA,GACzBnB,KAAK,CAAC0B,IAAI,KAAK,QAAQ,GAAG,QAAQ,GAAG,OAAO,EAAC,OAChD;UAAA;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAW,CAAC,eACZhF,OAAA,CAACe,WAAW;YAACC,MAAM,EAAEyC,KAAK,CAACzC,MAAO;YAAA4D,QAAA,EAC/BnB,KAAK,CAACzC;UAAM;YAAA6D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,EACbvB,KAAK,CAACO,QAAQ,iBACbhE,OAAA;YAAM0F,KAAK,EAAE;cACXI,QAAQ,EAAE,SAAS;cACnBC,KAAK,EAAE,sBAAsB;cAC7BJ,OAAO,EAAE,MAAM;cACfE,UAAU,EAAE,QAAQ;cACpBD,GAAG,EAAE;YACP,CAAE;YAAAhB,QAAA,gBACA5E,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,6BACjB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CACP;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eACNhF,OAAA,CAACkB,UAAU;UAAA0D,QAAA,GACRnB,KAAK,CAACuC,WAAW,EAAC,GAAC,eAAAhG,OAAA;YAAM0F,KAAK,EAAE;cAAEI,QAAQ,EAAE,UAAU;cAAEG,UAAU,EAAE;YAAS,CAAE;YAAArB,QAAA,EAAEnB,KAAK,CAACyC;UAAY;YAAArB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEdhF,OAAA,CAACoB,YAAY;QAAAwD,QAAA,gBACX5E,OAAA,CAACsB,WAAW;UAAAsD,QAAA,gBACV5E,OAAA,CAACwB,WAAW;YAAAoD,QAAA,EAAC;UAAO;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,eAClChF,OAAA,CAAC0B,WAAW;YAAAkD,QAAA,gBACV5E,OAAA;cAAM0F,KAAK,EAAE;gBAAEK,KAAK,EAAE;cAAuB,CAAE;cAAAnB,QAAA,GAAEnB,KAAK,CAAC0C,YAAY,EAAC,KAAG,EAAC1C,KAAK,CAAC2C,YAAY;YAAA;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,SACpG;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACdhF,OAAA,CAACsB,WAAW;UAAAsD,QAAA,gBACV5E,OAAA,CAACwB,WAAW;YAAAoD,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,eACzChF,OAAA,CAAC0B,WAAW;YAAAkD,QAAA,GACTnB,KAAK,CAAC4C,WAAW,KAAK,wBAAwB,iBAAIrG,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EACjEvB,KAAK,CAAC4C,WAAW,KAAK,mBAAmB,iBAAIrG,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EAC5DvB,KAAK,CAAC4C,WAAW,KAAK,UAAU,iBAAIrG,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EACnDvB,KAAK,CAAC4C,WAAW,KAAK,iBAAiB,iBAAIrG,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EAC1DvB,KAAK,CAAC4C,WAAW,KAAK,gBAAgB,iBAAIrG,OAAA;cAAA4E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EACzD,GAAG,EAAE5C,cAAc,CAACqB,KAAK,CAAC4C,WAAW,CAAC,IAAI5C,KAAK,CAAC4C,WAAW;UAAA;YAAAxB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACdhF,OAAA,CAACsB,WAAW;UAAAsD,QAAA,gBACV5E,OAAA,CAACwB,WAAW;YAAAoD,QAAA,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,eAC/BhF,OAAA,CAAC0B,WAAW;YAAAkD,QAAA,GACTnB,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC7C,KAAK,CAAC6C,WAAW,KAAK,IAAI,IAAI,MAAM,EACpC,GAAG,EAAE7C,KAAK,CAAC6C,WAAW;UAAA;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACdhF,OAAA,CAACsB,WAAW;UAAAsD,QAAA,gBACV5E,OAAA,CAACwB,WAAW;YAAAoD,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,eACxChF,OAAA,CAAC0B,WAAW;YAAAkD,QAAA,gBACV5E,OAAA;cAAM0F,KAAK,EAAE;gBAAEK,KAAK,EAAE;cAAuB,CAAE;cAAAnB,QAAA,GAAC,eAAG,EAACnB,KAAK,CAAC8C,aAAa;YAAA;cAAA1B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,QACjF;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEfhF,OAAA,CAAC4B,YAAY;QAAAgD,QAAA,EACVnB,KAAK,CAACzC,MAAM,KAAK,WAAW,IAAIyC,KAAK,CAACzC,MAAM,KAAK,YAAY,iBAC5DhB,OAAA,CAAAE,SAAA;UAAA0E,QAAA,gBACE5E,OAAA,CAACH,MAAM;YACL2G,IAAI,EAAC,OAAO;YACZC,OAAO,EAAEhD,KAAK,CAACzC,MAAM,KAAK,QAAQ,GAAG,SAAS,GAAG,SAAU;YAC3DkE,OAAO,EAAEA,CAAA,KAAM1B,kBAAkB,CAACC,KAAK,CAAE;YACzCiC,KAAK,EAAE;cACLC,OAAO,EAAE,MAAM;cACfE,UAAU,EAAE,QAAQ;cACpBD,GAAG,EAAE,SAAS;cACdc,YAAY,EAAE,KAAK;cACnBT,UAAU,EAAE;YACd,CAAE;YAAArB,QAAA,EAEDnB,KAAK,CAACzC,MAAM,KAAK,QAAQ,gBACxBhB,OAAA,CAAAE,SAAA;cAAA0E,QAAA,gBACE5E,OAAA;gBAAA4E,QAAA,EAAM;cAAE;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,WACjB;YAAA,eAAE,CAAC,gBAEHhF,OAAA,CAAAE,SAAA;cAAA0E,QAAA,gBACE5E,OAAA;gBAAA4E,QAAA,EAAM;cAAE;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,YACjB;YAAA,eAAE;UACH;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC,eACThF,OAAA,CAACH,MAAM;YACL2G,IAAI,EAAC,OAAO;YACZC,OAAO,EAAC,QAAQ;YAChBvB,OAAO,EAAEA,CAAA,KAAMZ,iBAAiB,CAACb,KAAK,CAAE;YACxCiC,KAAK,EAAE;cACLC,OAAO,EAAE,MAAM;cACfE,UAAU,EAAE,QAAQ;cACpBD,GAAG,EAAE,SAAS;cACdc,YAAY,EAAE,KAAK;cACnBT,UAAU,EAAE;YACd,CAAE;YAAArB,QAAA,gBAEF5E,OAAA;cAAA4E,QAAA,EAAM;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,aAClB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,eACT;MACH;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACW,CAAC;IAAA,GAjHVvB,KAAK,CAACG,EAAE;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAkHJ,CACZ,CAAC,eAEFhF,OAAA;MAAK0F,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfgB,cAAc,EAAE,QAAQ;QACxBC,SAAS,EAAE;MACb,CAAE;MAAAhC,QAAA,eACA5E,OAAA,CAACkC,iBAAiB;QAACgD,OAAO,EAAEtC,aAAc;QAAAgC,QAAA,EAAC;MAE3C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAEtB,CAAC;AAACnC,EAAA,CA5OIH,aAAa;AAAAmE,IAAA,GAAbnE,aAAa;AA8OnB,eAAeA,aAAa;AAAC,IAAArC,EAAA,EAAAI,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAA0E,IAAA;AAAAC,YAAA,CAAAzG,EAAA;AAAAyG,YAAA,CAAArG,GAAA;AAAAqG,YAAA,CAAAnG,GAAA;AAAAmG,YAAA,CAAAhG,GAAA;AAAAgG,YAAA,CAAA7F,GAAA;AAAA6F,YAAA,CAAA3F,GAAA;AAAA2F,YAAA,CAAAzF,GAAA;AAAAyF,YAAA,CAAAvF,GAAA;AAAAuF,YAAA,CAAArF,GAAA;AAAAqF,YAAA,CAAAnF,GAAA;AAAAmF,YAAA,CAAAjF,GAAA;AAAAiF,YAAA,CAAA/E,IAAA;AAAA+E,YAAA,CAAA7E,IAAA;AAAA6E,YAAA,CAAA3E,IAAA;AAAA2E,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}